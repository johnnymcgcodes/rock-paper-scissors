<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Rock, Paper, Scissors</title>
  </head>
  <body>
    <h1>Rock, Paper, Scissors</h1>
    <script>
      // create three choices for game
      const options = ["rock", "paper", "scissors"];
      // create a computer play function that randomly chooses one option
      function computerPlay() {
        return options[Math.floor(Math.random() * 3)];
      }
      // create a player score and comp score;
      let playerPoints;
      let computerPoints;
      // create a computer choice variable and player choice;
      let playerChoice;
      let computerChoice;
      //game design
      function game() {
        computerPoints = 0;
        playerPoints = 0;
        for (let i = 0; i < 5; i++) {
          onPlayersInput();
        }
        console.log(declareWinner());
        function declareWinner() {
          if (playerPoints === computerPoints) {
            alert(playerPoints + "-" + computerPoints + "\nTie game!");
            return playerPoints + "-" + computerPoints + "\nTie game!";
          } else if (playerPoints > computerPoints) {
            alert(playerPoints + "-" + computerPoints + "\nYou win!!");
            return playerPoints + "-" + computerPoints + "\nYou win!!";
          } else {
            alert(
              playerPoints +
                "-" +
                computerPoints +
                "\nYou lost. Better luck next time!"
            );
            return (
              playerPoints +
              "-" +
              computerPoints +
              "\nYou lost. Better luck next time!"
            );
          }
        }
      }
      //  set player choice variable equal to input
      //verify that player inputs correct choice, regardless of uppercase
      function onPlayersInput() {
        playerChoice = prompt("Rock, Paper, or Scissors?", "");
        if (
          playerChoice.toLowerCase() == "rock" ||
          playerChoice.toLowerCase() == "paper" ||
          playerChoice.toLowerCase() == "scissors"
        ) {
          console.log(rps(playerChoice, computerChoice));
        } else {
          alert("That's not a valid choice.");
          onPlayersInput();
        }
      }
      //play one round
      function rps(playerChoice, computerChoice) {
        // create a comp choice and lower case it. then get a player choice.
        computerChoice = computerPlay();
        console.log("Player move: " + playerChoice);
        console.log("Computer move: " + computerChoice);
        playerChoice = playerChoice.toLowerCase();
        // create rules for winning
        if (computerChoice == playerChoice) {
          alert("Tie game!");
          return (
            "Tie game\nComputer Score: " +
            computerPoints +
            "\nYour Score: " +
            playerPoints
          );
        } else if (
          (computerChoice == "rock") & (playerChoice == "scissors") ||
          (computerChoice == "paper") & (playerChoice == "rock") ||
          (computerChoice == "scissors") & (playerChoice == "paper")
        ) {
          alert("You lose! " + computerChoice + " beats " + playerChoice);
          return (
            "Computer Score: " +
            ++computerPoints +
            "\nYour Score: " +
            playerPoints
          );
        } else {
          alert("You win! " + playerChoice + " beats " + computerChoice);
          return (
            "Your Score: " +
            ++playerPoints +
            "\nComputer Score: " +
            computerPoints
          );
        }
      }
    </script>
  </body>
</html>
